@{
    ViewData["Title"] = "é¦–é ";
    var isHomePage =
        string.Equals(ViewContext.RouteData.Values["controller"]?.ToString(), "Home", StringComparison.OrdinalIgnoreCase) &&
        string.Equals(ViewContext.RouteData.Values["action"]?.ToString(), "Index", StringComparison.OrdinalIgnoreCase) &&
        string.Equals(ViewContext.RouteData.Values["area"]?.ToString(), "CustomersArea", StringComparison.OrdinalIgnoreCase);
}

<script>
    window.isHomePage = @(isHomePage.ToString().ToLower());
</script>

@section Styles {
    <style>

        /* --------------------------
        å…¨åŸŸï¼šå€å¡Šæ¨™é¡Œï¼ˆsection titleï¼‰ - ç”¨æ–¼å„å€å¡Šçš„ä¸»æ¨™é¡Œ h2 èˆ‡ä¸‹æ–¹é€£æ¥å°æ¢
        -------------------------- */
        .section-title h2 {
            font-weight: bold;
            letter-spacing: 2px;
            text-align: center;
        }

        .section-title > div {
            width: 60px;
            height: 3px;
            background: #7ec8e3;
            margin: 10px auto 0;
            border-radius: 2px;
        }

        /* --------------------------
        ğŸ¾ Section Card å¡ç‰‡é¢¨æ ¼
        -------------------------- */
        .section-card {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
            padding: 1.8rem 1.5rem;
            margin: 2rem auto;
            max-width: 1200px;
            position: relative;
            z-index: 1;
            transition: all 0.35s ease;
        }

            .section-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 22px rgba(0, 0, 0, 0.10);
            }

        /* å¡ç‰‡ä¹‹é–“çš„å‘¼å¸ç©ºé–“ */
        .section {
            padding: 0.1rem 0;
        }
            /* äº¤éŒ¯æŸ”å…‰èƒŒæ™¯å±¤ï¼ˆä¿æŒå±¤æ¬¡ï¼‰ */
            .section:nth-child(even) {
                background: linear-gradient(180deg, #f9fcff 0%, #ffffff 100%);
            }

            .section:nth-child(odd) {
                background: linear-gradient(180deg, #ffffff 0%, #f8fbff 100%);
            }

        /* ğŸ’¡RWDï¼šå¹³æ¿ï¼†æ‰‹æ©Ÿ */
        @@media (max-width: 992px) {
            .section-card

        {
            padding: 1.5rem;
            margin: 1.5rem 1rem;
            border-radius: 16px;
        }

        }
        @@media (max-width: 768px) {
            .section-card

        {
            padding: 1.3rem;
            margin: 1.2rem 0.8rem;
            border-radius: 14px;
        }

        }
        /* --------------------------
        Hero / Banner - å¤§èƒŒæ™¯åœ–ã€æ·¡å…¥ç¸®æ”¾æ•ˆæœ
        -------------------------- */
        .hero {
            position: relative;
            max-height: 600px;
            height: 60vh;
            min-height: 400px;
            border-radius: 0 0 40px 40px;
            overflow: hidden;
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.1);
        }

        #heroMedia {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.65) saturate(1.15);
            transition: transform 0.8s ease, filter 1s ease;
        }

        .hero:hover #heroMedia {
            transform: scale(1.05);
            filter: brightness(0.75);
        }
        /* ğŸ’¡RWDï¼šç¸®å°é«˜åº¦ */
        @@media (max-width: 768px) {
            .hero

        {
            height: 50vh;
            min-height: 320px;
        }

        }
        @@media (max-width: 576px) {
            .hero

        {
            height: 45vh;
            min-height: 280px;
        }

        }
        /* --------------------------
            é£„æµ®è²“æŒï¼ˆè£é£¾ï¼‰
            - pointer-events: none é¿å…é®æ“‹äº’å‹•
            - ä½¿ç”¨ keyframes pawFloat åšä¸Šä¸‹ç§»å‹•èˆ‡æ·¡å…¥æ·¡å‡º
        -------------------------- */
        .floating-paws {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            top: 0;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }

            .floating-paws span {
                position: absolute;
                font-size: 2rem;
                opacity: 0.15;
                animation: pawFloat 10s linear infinite;
                filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
            }

                .floating-paws span:nth-child(1) {
                    left: 15%;
                    animation-duration: 12s;
                    animation-delay: 0s;
                    font-size: 2.3rem;
                }

                .floating-paws span:nth-child(2) {
                    left: 45%;
                    animation-duration: 15s;
                    animation-delay: 3s;
                    font-size: 2rem;
                }

                .floating-paws span:nth-child(3) {
                    left: 75%;
                    animation-duration: 13s;
                    animation-delay: 6s;
                    font-size: 2.6rem;
                }
        @@keyframes pawFloat {
            0%

        {
            transform: translateY(100%) rotate(0deg) scale(1);
            opacity: 0;
        }

        10% {
            opacity: 0.2;
        }

        50% {
            transform: translateY(-50%) rotate(15deg) scale(1.1);
            opacity: 0.25;
        }

        90% {
            opacity: 0.15;
        }

        100% {
            transform: translateY(-120%) rotate(-15deg) scale(1);
            opacity: 0;
        }

        }
        /* æ‰‹æ©Ÿï¼šè²“æŒç¸®å°ä¸¦å»¶é•·å‹•ç•«ï¼Œä½¿è¦–è¦ºä¸æœƒæ¶åˆ°æœå°‹åˆ— */
        @@media (max-width: 768px) {
            .floating-paws span

        {
            font-size: 1.6rem;
            animation-duration: 14s;
        }

        }

        /* --------------------------
            æœå°‹åˆ—ï¼ˆSearch wrapperï¼‰èˆ‡è¼¸å…¥å…ƒä»¶
            - åŒ…å« tabsã€è¼¸å…¥æ¬„ã€æŒ‰éˆ•èˆ‡å…§åµŒäººæ•¸æ§åˆ¶
        -------------------------- */
        .search-wrapper {
            position: relative;
            top: 25%;
            left: 50%;
            bottom: 40px;
            transform: translateX(-50%);
            width: 90%;
            max-width: 1100px;
            max-height: 400px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(6px);
            border-radius: 20px;
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.25);
            padding: 18px;
            z-index: 1000;
        }

            .search-wrapper h1 {
                font-weight: 700;
                text-align: center;
                margin-bottom: 1.2rem;
                letter-spacing: 1px;
            }

        .search-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 1.2rem;
        }

        .search-tab {
            padding: 6px 18px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            color: #555;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(126, 200, 227, 0.3);
            transition: all 0.25s ease;
        }

            .search-tab.active {
                background: linear-gradient(135deg, #7ec8e3, #22b3c1);
                color: #fff;
                box-shadow: 0 4px 10px rgba(34,179,193,0.3);
            }

        .search-box {
            display: grid;
            grid-template-columns: 2.2fr 2.2fr 1.6fr 140px;
            gap: 12px;
        }

        .search-select {
            background: rgba(255, 255, 255, 0.75);
            border: 1px solid rgba(200, 225, 240, 0.8);
            border-radius: 14px;
            padding: 12px 16px;
            transition: all 0.25s ease;
            position: relative;
        }

            .search-select:focus-within {
                border-color: #7ec8e3;
            }

        .search-input {
            width: 100%;
            border: none;
            outline: none;
            background: transparent;
            font-weight: 600;
            color: #222;
        }

            .search-input::placeholder {
                color: #6b7d90;
                font-weight: 500;
            }

        .search-btn {
            background: linear-gradient(135deg, #7ec8e3, #22b3c1);
            color: #fff;
            font-weight: 700;
            border: none;
            padding: 14px 0;
            transition: all 0.3s ease;
        }

            .search-btn:hover {
                background: linear-gradient(135deg, #22b3c1, #7ec8e3);
                box-shadow: 0 4px 12px rgba(34, 179, 193, 0.4);
            }
        /* --------------------------
          å»ºè­°é¢æ¿ï¼ˆdropdown-panelï¼‰èˆ‡å»ºè­°é …ç›®
          - é¢æ¿æœƒè¢« JS ç§»åˆ° bodyï¼ŒCSS åªè² è²¬å¤–è§€
        -------------------------- */
        .dropdown-panel {
            position: absolute;
            z-index: 9999;
            background: #fff;
            border: 1px solid #dbe7ef;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
            width: 100%;
            max-height: 260px;
            overflow-y: auto;
            box-sizing: border-box;
            padding: 8px 10px;
            font-size: 0.95rem;
        }

            .dropdown-panel::-webkit-scrollbar {
                width: 6px;
            }

            .dropdown-panel::-webkit-scrollbar-thumb {
                background-color: rgba(126, 200, 227, 0.5);
                border-radius: 4px;
            }

                .dropdown-panel::-webkit-scrollbar-thumb:hover {
                    background-color: rgba(126, 200, 227, 0.8);
                }
        /* ğŸ’¡RWDï¼šå¹³æ¿ */
        @@media (max-width: 992px) {
            .search-wrapper {
                top: auto;
                bottom: 40px;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                width: 90%;
                max-width: 500px;
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(6px);
                border-radius: 18px;
                padding: 16px 14px;
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
            }

            .search-box {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .search-select {
                padding: 10px 12px;
                font-size: 0.95rem;
                border-radius: 12px;
            }

            .search-btn {
                grid-column: span 2;
                padding: 12px 0;
            }

        }

        /* ğŸ’¡RWDï¼šæ‰‹æ©Ÿç‰ˆï¼ˆ768px ä»¥ä¸‹ï¼‰ */
        @@media (max-width: 768px) {
            .hero {
                height: auto;
                padding-bottom: 120px; /* é ç•™ hero é«˜åº¦ç©ºé–“çµ¦æœå°‹æ¡† */
            }
            .search-wrapper

            {
                position: absolute;
                left: 50%;
                bottom: 20px;
                transform: translateX(-50%);
                width: calc(100% - 28px);
                max-width: 460px;
                padding: 14px 12px;
                border-radius: 18px;
                background: rgba(255, 255, 255, 0.92);
                box-sizing: border-box;
                backdrop-filter: blur(6px);
            }

            .search-box {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                align-items: center;
            }

            .search-select {
                padding: 8px 12px;
                font-size: 0.95rem;
                border-radius: 12px;
            }

            .search-btn {
                padding: 10px 0;
                font-size: 1rem;
                border-radius: 12px;
            }

        }


        /* ğŸ’¡RWDï¼šå°æ‰‹æ©Ÿï¼ˆ576px ä»¥ä¸‹ï¼‰ */
        @@media (max-width: 576px) {
            .hero {
                height: auto;
                min-height: 460px; /* ç¨å¾®åŠ é«˜ä¸€é» */
                padding-top: 40px; /* æ¨™é¡Œèˆ‡ä¸Šæ–¹ç©ºé–“ */
                padding-bottom: 140px; /* æœå°‹åˆ—é ç•™ç©ºé–“ */
            }

            .search-wrapper {
                position: absolute;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                width: calc(100% - 24px);
                max-width: 430px;
                background: rgba(255, 255, 255, 0.96);
                border-radius: 16px;
                padding: 16px 14px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
            }

            .search-box {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                align-items: center;
            }

            .search-select {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 8px 10px;
                font-size: 0.9rem;
                border-radius: 10px;
                border: 1px solid #e2e8f0;
                background-color: #fff;
                min-height: 42px;
            }
            /* ã€Œäººæ•¸é¸æ“‡ã€å€å¡Šå¾®èª¿ */
            #peopleInput, .people-label {
                font-size: 0.85rem !important; /* 2 ä½æ—…å®¢ è®Šå° */
                font-weight: 500;
            }
            /* + - æŒ‰éˆ•ç¸®å° */
            .people-controls button {
                width: 26px !important;
                height: 26px !important;
                font-size: 0.9rem !important;
                border-radius: 8px;
                background: #f1f5f9;
                border: 1px solid #d1d5db;
                color: #333;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all .2s ease;
            }

                .people-controls button:hover {
                    background: #e0f7fa;
                    border-color: #7ec8e3;
                    color: #22b3c1;
                }

            .search-btn {
                grid-column: span 3;
                width: 100%;
                font-size: 0.95rem;
                padding: 10px 0;
                border-radius: 10px;
                margin-top: 4px;
                justify-self: end;
            }
            /* æ¨™é¡Œå¾®ç¸®ï¼Œè®“ hero æ›´å¹³è¡¡ */
            .search-wrapper h1 {
                font-size: 1.25rem;
                margin-bottom: 1rem;
                text-align: center;
            }
            /* Tab æ’åˆ—ç·Šæ¹Šä¸€é» */
            .search-tabs {
                gap: 6px;
                margin-bottom: 1rem;
            }

            .search-tab {
                padding: 4px 14px;
                font-size: 0.9rem;
            }

            .dropdown-panel {
                width: calc(80vw - 40px) !important; /* ç•™å®‰å…¨é‚Šè· */
                left: 50% !important;
                transform: translateX(-50%);
                font-size: 0.9rem;
                padding: 8px;
                border-radius: 10px;
                max-height: 220px;
            }

                .dropdown-panel div,
                .dropdown-panel li {
                    padding: 6px 8px;
                }
        }

  
        @@keyframes dropdownFade {
            from

        {
            opacity: 0;
            transform: translateY(-4px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }

        .suggest-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0,1fr));
            gap: 8px;
        }

        .suggest-item {
            cursor: pointer;
            padding: 8px 10px;
            border: 1px solid #eef3fb;
            border-radius: 10px;
            background: #fafcff;
            font-size: 0.95rem;
        }

            .suggest-item:hover {
                background: #e6f8fc;
                border-color: #b4e3f0;
                box-shadow: 0 0 6px rgba(126, 200, 227, 0.25);
                transform: translateY(-2px);
            }

        /* --------------------------
         äººæ•¸å…§åµŒæ§åˆ¶ï¼ˆpeople-inlineï¼‰
        -------------------------- */
        .people-inline {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
        }

            .people-inline .ctrl {
                display: flex;
                align-items: center;
                gap: 8px;
            }

            .people-inline button {
                width: 32px;
                height: 32px;
                line-height: 30px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
        /* è®“ people æ¬„ä½é«˜åº¦èˆ‡å…¶ä»– search-select ä¸€è‡´ */
        .search-select .people-inline {
            height: 100%;
        }
        /* è®“æ•¸å­—èˆ‡æŒ‰éˆ•å…§å®¹ä¸æœƒæ’å¤§é«˜åº¦ */
        .people-inline span,
        .people-inline .ctrl * {
            line-height: 1.2;
        }

        /* --------------------------
         Swiper å°è¦½æŒ‰éˆ•ï¼ˆå°åœ“æŒ‰éˆ•æ¨£å¼ï¼‰
        -------------------------- */
        .swiper-btn {
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: all .25s;
            color: #7ec8e3;
        }

            .swiper-btn:hover {
                background: #7ec8e3;
                color: #fff;
                box-shadow: 0 4px 10px rgba(34,179,193,0.4);
            }

        .swiper-nav {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --------------------------
          å•†å“æ¨™é¡Œé™åˆ¶ï¼ˆé¿å…é«˜åº¦ä¸ä¸€ï¼‰
        -------------------------- */
        .product-title {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
            word-break: break-word;
            min-height: 3em;
        }

        /* --------------------------
            Section / container stacking
            - ç¢ºä¿æœå°‹åˆ—åœ¨ä¸Šå±¤ï¼ˆé¿å…è¢«å¾Œé¢å€å¡Šè“‹éï¼‰
        -------------------------- */
        .section, .container {
            position: relative;
            z-index: 1;
        }

        /* --------------------------
            FAQï¼ˆå¸¸è¦‹å•é¡Œï¼‰å°ˆå±¬æ¨£å¼
            - å•é¡Œ/ç­”æ¡ˆçš„æŠ˜ç–Šé¡¯ç¤ºæ•ˆæœ
        -------------------------- */
        /* #faqSection {
            background: linear-gradient(180deg, #f8fbff 0%, #ffffff 100%);
            padding: 3rem 2rem;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        } */

        .faq-item {
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            border: 1px solid #d8ebff;
        }

            .faq-item:hover {
                transform: scale(1.01);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            }

        .faq-question {
            background: linear-gradient(90deg, #e9f9ff 0%, #f5fbff 100%);
            color: #208aac;
            font-weight: 600;
            padding: 0.6rem 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background .3s, color .3s;
        }

            .faq-question i {
                transition: transform .3s ease;
                color: #7ec8e3;
            }

        .faq-item.active .faq-question {
            background: linear-gradient(90deg, #dff1ff, #f4faff);
            color: #226dd3;
        }

            .faq-item.active .faq-question i {
                transform: rotate(180deg);
            }

        .faq-answer {
            padding: 1.2rem 1.5rem;
            color: #444;
            display: none;
            background: #fff;
            border-top: 1px solid #d8ebff;
            font-size: 1rem;
        }

        .faq-item.active .faq-answer {
            display: block;
            animation: fadeIn .4s ease;
        }
        @@keyframes fadeIn {
            from

        {
            opacity: 0;
            transform: translateY(-6px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }
        @@media (max-width: 768px) {
            .faq-question

        {
            font-size: 1rem;
            padding: 1rem 1.2rem;
        }

        .faq-answer {
            font-size: 0.95rem;
            padding: 1rem 1.2rem;
        }

        }
        /* ğŸ’¡RWDï¼šæ‰‹æ©Ÿç¸®æ’èˆ‡å­—ç´š */
        @@media (max-width: 576px) {
            .faq-question

        {
            font-size: 1rem;
            padding: 0.8rem 1rem;
        }

        .faq-answer {
            font-size: 0.9rem;
            padding: 0.8rem 1rem;
        }

        }
        /* ç†±é–€ç”¢å“card */
        /* çµ±ä¸€ç”¢å“å¡æ¨£å¼ï¼ˆä¿®æ­£ç‰ˆï¼‰ */
        .product-card {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: #fff;
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.25s ease;
        }

            .product-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 6px 22px rgba(0, 0, 0, 0.1);
            }

        /* ç¢ºä¿åœ–ç‰‡å›ºå®šé«˜åº¦ï¼Œä¸æ’é–‹å¡ç‰‡ */
        .product-thumb img {
            display: block;
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        /* å…§å®¹å€å¡Šæ’æ»¿å‰©é¤˜ç©ºé–“ */
        .product-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: linear-gradient(180deg, #f9fcff 0%, #ffffff 100%);
        }

        /* é™åˆ¶æ¨™é¡Œè¡Œæ•¸ */
        .product-title {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
            min-height: 4em;
        }

        .swiper-wrapper {
            padding:10px; /* ä¸Šå³ä¸‹å·¦ */
        }

    </style>
}

<!-- Hero -->
<!-- ===== Hero / Banner ===== -->
<section class="hero mt-3">
    <img src="https://images.unsplash.com/photo-1519052537078-e6302a4968d4?q=80&w=1800&auto=format&fit=crop" alt="å¸¶è²“æ—…è¡Œçš„æµ·é‚Šæ—¥è½" id="heroMedia" />

    <!-- Trip.com é¢¨æ ¼æœå°‹åˆ— -->
    <div class="search-wrapper">
        <h1 class="display-6 fw-bolder mb-3">å¸¶è‘—æ¯›å­©å»æ—…è¡Œï¼Œæ¢ç´¢ä¸‹ä¸€ç«™</h1>
        <!-- åˆ†é¡ Tab -->
        <div class="search-tabs">
            <div class="search-tab active" data-type="trip">å¥—è£è¡Œç¨‹</div>
            <div class="search-tab" data-type="hotel">ä½å®¿</div>
            <div class="search-tab" data-type="ticket">æ™¯é»é–€ç¥¨</div>
            <div class="search-tab" data-type="car">ç§Ÿè»Š</div>
        </div>

        <!-- æœå°‹è¡¨å–®ï¼ˆè·³è½‰åˆ°å¾Œç«¯æœå°‹ï¼‰ -->
        <form asp-area="CustomersArea" asp-controller="Products" asp-action="Search" method="get" id="topSearchForm">
            <input type="hidden" name="type" id="searchType" value="trip" />
            <input type="hidden" name="start" id="startDate" />
            <input type="hidden" name="end" id="endDate" />
            <input type="hidden" name="people" id="peopleInput" value="2" />

            <div class="search-box">
                <!-- ç›®çš„åœ°ï¼ˆå¯è¼¸å…¥ + å»ºè­°ï¼›é»é¸å¾Œæœƒé—œé–‰ä¸‹æ‹‰ï¼‰ -->
                <div class="search-select" id="destSelect">
                    <label class="float-label">ç›®çš„åœ°</label>
                    <input type="text" class="search-input" id="destinationInput" name="destination"
                           placeholder="è«‹è¼¸å…¥æˆ–é¸æ“‡ç›®çš„åœ°" autocomplete="off" />
                    <div class="dropdown-panel" id="destPanel">
                        <div class="mb-2 fw-bold">ç†±é–€ç›®çš„åœ°</div>
                        <div class="suggest-grid" id="destSuggest"></div>
                    </div>
                </div>

                <!-- æ—¥æœŸï¼ˆdaterangepickerï¼šèµ·è¨– + æ™‚é–“ï¼‰ -->
                <div class="search-select">
                    <label class="float-label" id="dateTitle">å‡ºç™¼æ™‚é–“-è¿”ç¨‹æ™‚é–“</label>
                    <input type="text" class="search-input" id="dateLabel" placeholder="é¸æ“‡æ—¥æœŸèˆ‡æ™‚é–“" autocomplete="off" />
                </div>

                <!-- æ—…å®¢æ•¸ï¼ˆå…§åµŒæ§åˆ¶ï¼Œç„¡ä¸‹æ‹‰ï¼‰ -->
                <div class="search-select">
                    <label class="float-label">äººæ•¸</label>
                    <div class="people-inline">
                        <span class="fw-semibold" id="peopleLabel"><span class="fw-semibold" id="peopleCount">2</span> ä½æ—…å®¢</span>
                        <div class="ctrl">
                            <button type="button" class="btn btn-outline-secondary btn-sm rounded" id="minus"><i class="fa-solid fa-minus"></i></button>
                            <button type="button" class="btn btn-outline-secondary btn-sm rounded" id="plus"><i class="fa-solid fa-plus"></i></button>
                        </div>
                    </div>
                </div>

                <!-- æœå°‹ -->
                <button type="submit" class="btn btn-outline-primary search-btn">æœå°‹</button>
            </div>
        </form>
    </div>

    <!-- é£„æµ®è²“æŒè£é£¾ -->
    <div class="floating-paws" aria-hidden="true">
        <span>ğŸ¾</span><span>ğŸ¾</span><span>ğŸ¾</span>
    </div>
</section>

<!-- ç‚ºä½ ç²¾é¸ç†±é–€è¡Œç¨‹ -->
<section class="section" id="hotProducts" v-cloak>
    <div class="section-card">
        <div class="container" id="hot-app">
            <div class="section-title text-center mb-4">
                <h2 class="fw-bold" style="letter-spacing:2px">
                    <i class="fa-solid fa-paw me-2"></i>ç²¾é¸ç†±é–€è¡Œç¨‹
                </h2>
                <div style="width:60px; height:3px; background:#7ec8e3; margin:10px auto 0; border-radius:2px;"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="@Url.Action("Browse", "Products", new { area = "CustomersArea", type = "trip" })" class="btn btn-outline-primary rounded-pill fw-bold">
                    æŸ¥çœ‹æ‰€æœ‰è¡Œç¨‹ <i class="fa-solid fa-arrow-right ms-2"></i>
                </a>
                <div class="swiper-nav d-flex align-items-center gap-2">
                    <div class="swiper-btn hot-prev"><i class="fa-solid fa-chevron-left"></i></div>
                    <div class="swiper-btn hot-next"><i class="fa-solid fa-chevron-right"></i></div>
                </div>
            </div>

            <!-- Swiper -->
            <div class="swiper hot-swiper" aria-label="ç†±é–€å•†å“è¼ªæ’­">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="p in items" :key="p.productID">
                        <article class="product-card shadow-sm d-flex flex-column h-100">
                            <div class="product-thumb position-relative">
                                <img :src="p.cover" class="w-100" :alt="p.productName">
                                <span class="badge bg-info position-absolute top-0 start-0 m-2">ğŸ”¥ ç†±é–€</span>

                                <!-- â¤ï¸ æ”¶è—ï¼ˆVue ç¶å®šèªæ³•ï¼‰ -->
                                <button type="button" class="fav-float"
                                        :data-product-id="p.productID" aria-pressed="false" title="åŠ å…¥æ”¶è—">
                                    <i class="fa-solid fa-heart"></i>
                                </button>
                            </div>

                            <div class="product-body p-3 d-flex flex-column justify-content-between flex-grow-1">
                                <div>
                                    <h5 class="fw-bold mb-1 product-title">{{ p.productName }}</h5>
                                    <p class="text-muted mb-1">
                                        <i class="fa-solid fa-location-dot me-1 text-secondary"></i>{{ p.region }}
                                    </p>
                                    <div class="fw-bold text-primary">NT$ {{ p.price }} èµ·</div>
                                </div>

                                <a :href="'/CustomersArea/Products/Details/' + p.productID"
                                   class="btn btn-outline-primary w-100 rounded-pill fw-bold mt-2">
                                    æŸ¥çœ‹è©³æƒ…
                                    <i class="fa-solid fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ç²¾é¸ä½å®¿ -->
<section class="section" id="featured-hotels" v-cloak>
    <div class="section-card">
        <div class="container" id="hotels-app">
            <div class="section-title text-center mb-4">
                <h2 class="fw-bold" style="letter-spacing:2px">
                    <i class="fa-solid fa-bed me-2"></i>ç²¾é¸ä½å®¿
                </h2>
                <div style="width:60px;height:3px;background:#7ec8e3;margin:10px auto 0;border-radius:2px;"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="@Url.Action("Browse", "Products", new { area = "CustomersArea", type = "hotel" })" class="btn btn-outline-primary rounded-pill fw-bold">
                    æŸ¥çœ‹æ‰€æœ‰ä½å®¿ <i class="fa-solid fa-arrow-right ms-2"></i>
                </a>
                <div class="swiper-nav d-flex align-items-center gap-2">
                    <div class="swiper-btn hotel-prev"><i class="fa-solid fa-chevron-left"></i></div>
                    <div class="swiper-btn hotel-next"><i class="fa-solid fa-chevron-right"></i></div>
                </div>
            </div>

            <div class="swiper hotels-swiper" aria-label="ç²¾é¸ä½å®¿">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="p in items" :key="p.productID">
                        <article class="product-card shadow-sm">
                            <div class="product-thumb position-relative">
                                <img :src="p.cover" class="w-100 rounded-top" :alt="p.productName">
                                <span class="badge bg-info position-absolute top-0 start-0 m-2">ğŸ¨ ç²¾é¸</span>
                            </div>
                            <div class="product-body p-3">
                                <h5 class="fw-bold mb-1 product-title">{{ p.productName }}</h5>
                                <p class="text-muted mb-1"><i class="fa-solid fa-location-dot me-1 text-secondary"></i>{{ p.region }}</p>
                                <div class="fw-bold text-primary">NT$ {{ p.price }} èµ·</div>
                            </div>
                            <!-- æ–°å¢ æŸ¥çœ‹è©³æƒ…æŒ‰éˆ• -->
                            <a :href="'/CustomersArea/Products/Details/' + p.productID"
                               class="btn btn-outline-primary w-100 rounded-pill fw-bold">
                                æŸ¥çœ‹è©³æƒ…
                                <i class="fa-solid fa-arrow-right ms-1"></i>
                            </a>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ç²¾é¸æ™¯é»é–€ç¥¨ -->
<section class="section" id="featured-tickets" v-cloak>
    <div class="section-card">
        <div class="container" id="tickets-app">
            <div class="section-title text-center mb-4">
                <h2 class="fw-bold" style="letter-spacing:2px">
                    <i class="fa-solid fa-ticket me-2"></i>ç²¾é¸æ™¯é»é–€ç¥¨
                </h2>
                <div style="width:60px;height:3px;background:#7ec8e3;margin:10px auto 0;border-radius:2px;"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="@Url.Action("Browse", "Products", new { area = "CustomersArea", type = "ticket" })" class="btn btn-outline-primary rounded-pill fw-bold">
                    æŸ¥çœ‹æ‰€æœ‰é–€ç¥¨ <i class="fa-solid fa-arrow-right ms-2"></i>
                </a>
                <div class="swiper-nav d-flex align-items-center gap-2">
                    <div class="swiper-btn ticket-prev"><i class="fa-solid fa-chevron-left"></i></div>
                    <div class="swiper-btn ticket-next"><i class="fa-solid fa-chevron-right"></i></div>
                </div>
            </div>

            <div class="swiper tickets-swiper" aria-label="ç²¾é¸æ™¯é»é–€ç¥¨">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="p in items" :key="p.productID">
                        <article class="product-card shadow-sm">
                            <div class="product-thumb position-relative">
                                <img :src="p.cover" class="w-100 rounded-top" :alt="p.productName">
                                <span class="badge bg-info position-absolute top-0 start-0 m-2">ğŸŸï¸ ç†±è³£</span>
                            </div>
                            <div class="product-body p-3">
                                <h5 class="fw-bold mb-1 product-title">{{ p.productName }}</h5>
                                <p class="text-muted mb-1"><i class="fa-solid fa-location-dot me-1 text-secondary"></i>{{ p.region }}</p>
                                <div class="fw-bold text-primary">NT$ {{ p.price }} èµ·</div>
                                <!-- æ–°å¢ æŸ¥çœ‹è©³æƒ…æŒ‰éˆ• -->
                                <a :href="'/CustomersArea/Products/Details/' + p.productID"
                                   class="btn btn-outline-primary w-100 rounded-pill fw-bold">
                                    æŸ¥çœ‹è©³æƒ…
                                    <i class="fa-solid fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ç²¾é¸äº¤é€š -->
<section class="section" id="featured-transports" v-cloak>
    <div class="section-card">
        <div class="container" id="transports-app">
            <div class="section-title text-center mb-4">
                <h2 class="fw-bold" style="letter-spacing:2px">
                    <i class="fa-solid fa-car-side me-2"></i>ç²¾é¸äº¤é€š
                </h2>
                <div style="width:60px;height:3px;background:#7ec8e3;margin:10px auto 0;border-radius:2px;"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="@Url.Action("Browse", "Products", new { area = "CustomersArea", type = "car" })" class="btn btn-outline-primary rounded-pill fw-bold">
                    æŸ¥çœ‹æ‰€æœ‰äº¤é€š <i class="fa-solid fa-arrow-right ms-2"></i>
                </a>
                <div class="swiper-nav d-flex align-items-center gap-2">
                    <div class="swiper-btn transport-prev"><i class="fa-solid fa-chevron-left"></i></div>
                    <div class="swiper-btn transport-next"><i class="fa-solid fa-chevron-right"></i></div>
                </div>
            </div>

            <div class="swiper transports-swiper" aria-label="ç²¾é¸äº¤é€š">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" v-for="p in items" :key="p.productID">
                        <article class="product-card shadow-sm">
                            <div class="product-thumb position-relative">
                                <img :src="p.cover" class="w-100 rounded-top" :alt="p.productName">
                                <span class="badge bg-info position-absolute top-0 start-0 m-2">ğŸš— ç†±é–€</span>
                            </div>
                            <div class="product-body p-3">
                                <h5 class="fw-bold mb-1 product-title">{{ p.productName }}</h5>
                                @* <p class="text-muted mb-1"><i class="fa-solid fa-location-dot me-1 text-secondary"></i>{{ p.region }}</p> *@
                                <div class="fw-bold text-primary">NT$ {{ p.price }} èµ·</div>
                                <!-- æ–°å¢ æŸ¥çœ‹è©³æƒ…æŒ‰éˆ• -->
                                <a :href="'/CustomersArea/Products/Details/' + p.productID"
                                   class="btn btn-outline-primary w-100 rounded-pill fw-bold">
                                    æŸ¥çœ‹è©³æƒ…
                                    <i class="fa-solid fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </article>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- æœ€æ–°å„ªæƒ æ´»å‹• -->
<section class="section" id="promotions" v-cloak>
    <div class="section-card">
        <div class="container" id="promotion-app">
            <div class="section-title text-center mb-4">
                <h2 class="fw-bold" style="letter-spacing:2px">
                    <i class="fa-solid fa-bullhorn me-2"></i>æœ€æ–°å„ªæƒ æ´»å‹•
                </h2>
                <div style="width:60px;height:3px;background:#22B3C1;margin:10px auto 0;border-radius:2px;"></div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <a href="/CustomersArea/Promotions/Index"
                   class="btn btn-outline-primary rounded-pill fw-bold">
                    æŸ¥çœ‹æ‰€æœ‰å„ªæƒ  <i class="fa-solid fa-arrow-right ms-2"></i>
                </a>
                <div class="swiper-nav d-flex align-items-center gap-2">
                    <div class="swiper-btn promotion-prev"><i class="fa-solid fa-chevron-left"></i></div>
                    <div class="swiper-btn promotion-next"><i class="fa-solid fa-chevron-right"></i></div>
                </div>
            </div>

            <!-- âœ… ç”¨ items.length åˆ¤æ–· -->
            <div v-if="items.length > 0">
                <div class="swiper promotions-swiper" aria-label="æœ€æ–°å„ªæƒ æ´»å‹•">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide" v-for="p in items" :key="p.promoID">
                            <!-- æ–°å¢ æŸ¥çœ‹è©³æƒ…æŒ‰éˆ• -->
                            <a :href="'/CustomersArea/Promotions/Details/' + p.promoID">
                                <article class="product-card shadow-sm">
                                    <div class="product-thumb position-relative">
                                        <img :src="p.coverImage" class="w-100 rounded-top" :alt="p.promoName">
                                        <span class="badge bg-warning position-absolute top-0 start-0 m-2">ğŸ”¥ é™æ™‚</span>
                                    </div>
                                    <div class="product-body p-3">
                                        <h5 class="fw-bold mb-1 product-title">{{ p.promoName }}</h5>
                                        <p class="text-muted small mb-1">
                                            <i class="fa-regular fa-calendar me-1"></i>
                                            {{ formatDate(p.startTime) }} - {{ formatDate(p.endTime) }}
                                        </p>
                                        <p class="small text-muted fw-bold text-primary">{{ p.promoSummary }}</p>
                                        <span class="btn btn-outline-primary w-100 rounded-pill fw-bold">æŸ¥çœ‹è©³æƒ… <i class="fa-solid fa-arrow-right ms-1"></i></span>
                                    </div>
                                </article>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç„¡è³‡æ–™æç¤º -->
            <div v-else class="text-center text-muted py-5">
                <i class="bi bi-emoji-frown" style="font-size:2rem;"></i>
                <p class="mt-2 mb-0">ç›®å‰æ²’æœ‰é€²è¡Œä¸­çš„å„ªæƒ æ´»å‹•</p>
            </div>
        </div>
    </div>
</section>

<!-- ====================== å¸¸è¦‹å•é¡Œï¼ˆ API ç†±é–€è³‡æ–™ï¼‰ ====================== -->
<section class="section" id="faqSection">
    <div class="section-card">
        <div class="container py-3">
            <div class="section-title mb-4">
                <h2 class="fw-bold text-center mb-2" style="letter-spacing:2px">
                    <i class="fa-solid fa-circle-question me-2"></i> å¸¸è¦‹å•é¡Œ
                </h2>
                <div style="width:60px; height:3px; background:#7ec8e3; margin:10px auto 0; border-radius:2px;"></div>
            </div>

            <div id="faqList"></div>

            <div class="mt-4 text-center">
                <a href="/CustomersArea/FrontFAQs/Index"
                   class="btn btn-outline-primary rounded-pill px-4 py-2 fw-bold"
                   style="letter-spacing:1px;">
                    <i class="fa-solid fa-list-ul me-2"></i>æŸ¥çœ‹æ›´å¤šå¸¸è¦‹å•é¡Œ
                </a>
            </div>
        </div>
    </div>
</section>


<!-- Newsletter / CTA -->
<section class="section">
    <div class="container">
        <div class="newsletter d-flex flex-column flex-lg-row align-items-center justify-content-between gap-3 mb-5">
            <div>
                <h3 class="mb-1">è¨‚é–±æœ€æ–°æ—…éŠå„ªæƒ </h3>
                <p class="mb-0">ç¬¬ä¸€æ™‚é–“å–å¾—æŠ˜æ‰£ç¢¼ã€ç†±é–€æ´»å‹•èˆ‡æ—…éŠéˆæ„Ÿã€‚</p>
            </div>
            <form class="d-flex gap-2 w-100 w-lg-50" onsubmit="event.preventDefault(); alert('å·²è¨‚é–±ï¼');">
                <input type="email" class="form-control form-control-lg" placeholder="è¼¸å…¥ä½ çš„ Email" required>
                <button class="btn btn-dark btn-lg rounded-5">è¨‚é–±</button>
            </form>
        </div>
    </div>
</section>



@section Scripts {
    <script>
        // âœ… åˆå§‹åŒ–æ™‚æ¬å‡º dropdown-panelï¼ˆç¢ºä¿ä¸è¢« hero åŒ…ä½ï¼‰
        document.addEventListener('DOMContentLoaded', () => {
            const panel = document.getElementById('destPanel');
            if (panel && panel.parentElement !== document.body) {
                document.body.appendChild(panel);
            }
        });
    </script>

    <script>

        // å…±ç”¨ï¼šå»ºç«‹ä¸€å€‹ Vue + Swiper å¹«æ‰‹
        function mountFeatured(appId, apiUrl, swiperSelector, prevEl, nextEl){
          const app = Vue.createApp({
            data(){ return { items: [] }; },
            methods: {
              formatDate(d){
                if(!d) return '';
                return new Date(d).toLocaleDateString('zh-TW');
                }
            },
            mounted(){
              axios.get(apiUrl)
                .then(res => { this.items = res.data || []; })
                .then(() => this.$nextTick(() => {
                  new Swiper(swiperSelector, {
                    slidesPerView: 1.2,
                    spaceBetween: 20,
                    navigation: { prevEl, nextEl },
                    preventClicks: false,            // â˜… å…è¨± slide å…§ click
                    touchStartPreventDefault: false, // â˜… å…è¨±åŸç”Ÿäº‹ä»¶
                    breakpoints: {
                      576:{ slidesPerView:2 },
                      768:{ slidesPerView:3 },
                      992:{ slidesPerView:4 }
                    }
                  });
                }))
                .catch(err => console.error('è¼‰å…¥å¤±æ•—ï¼š', apiUrl, err));
            }
          });
          app.mount(appId);
        }

        // ä½å®¿ / é–€ç¥¨ / äº¤é€š / ç†±é–€è¡Œç¨‹è¼‰å…¥
        mountFeatured('#hot-app',    '/CustomersArea/Products/GetHotProducts',    '.hot-swiper',    '.hot-prev',    '.hot-next');
        mountFeatured('#hotels-app',    '/CustomersArea/Products/GetFeaturedHotels',    '.hotels-swiper',    '.hotel-prev',    '.hotel-next');
        mountFeatured('#tickets-app',   '/CustomersArea/Products/GetFeaturedTickets',   '.tickets-swiper',   '.ticket-prev',   '.ticket-next');
        mountFeatured('#transports-app','/CustomersArea/Products/GetFeaturedTransports','.transports-swiper','.transport-prev','.transport-next');
        mountFeatured('#promotion-app','/CustomersArea/Promotions/GetLatestPromotions','.promotions-swiper','.promotion-prev','.promotion-next');

        // ====================== FAQ ç†±é–€è³‡æ–™è¼‰å…¥ ======================
        document.addEventListener('DOMContentLoaded', async () => {
            const faqListContainer = document.getElementById('faqList');
            try {
                const response = await axios.get('/CustomersArea/FrontFAQs/api/hot');
                const faqs = response.data;

                if (!faqs || faqs.length === 0) {
                    faqListContainer.innerHTML = `
                        <div class="text-center text-muted py-5">
                            <i class="fa-solid fa-cat" style="font-size:2rem;"></i>
                            <p class="mt-3">ç›®å‰æ²’æœ‰ç†±é–€å¸¸è¦‹å•é¡Œå–” ğŸ¾</p>
                        </div>`;
                    return;
                }

                let html = '';
                faqs.forEach(faq => {
                    html += `
                        <div class="faq-item">
                            <div class="faq-question">
                                <span><i class="fa-solid fa-paw me-2"></i>${faq.question}</span>
                                <i class="fa-solid fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">${faq.answer}</div>
                        </div>`;
                });
                faqListContainer.innerHTML = html;

                const faqItems = document.querySelectorAll('.faq-item');
                faqItems.forEach(item => {
                    const q = item.querySelector('.faq-question');
                    q.addEventListener('click', () => {
                        faqItems.forEach(i => {
                            if (i !== item) i.classList.remove('active');
                        });
                        item.classList.toggle('active');
                    });
                });
            } catch (err) {
                console.error('è¼‰å…¥ FAQ å¤±æ•—ï¼š', err);
                faqListContainer.innerHTML = `<div class="alert alert-danger">
                    ç„¡æ³•è¼‰å…¥ç†±é–€å¸¸è¦‹å•é¡Œï¼Œè«‹ç¨å¾Œå†è©¦ã€‚
                </div>`;
            }

            // åªæœ‰é¦–é æ‰å•Ÿç”¨æ»¾å‹•ï¼ˆé¿å…å…¶ä»–é èª¤è§¸ï¼‰
            if (window.isHomePage && window.location.hash === '#faqSection') {
                const faqTarget = document.querySelector('#faqSection');
                if (faqTarget) {
                    setTimeout(() => {
                        window.scrollTo({
                            top: faqTarget.offsetTop - 60,
                            behavior: 'smooth'
                        });
                    }, 400);
                }
            }
        });

    </script>

    <!-- daterangepicker -->
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment/min/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <script>
        // Tab å°æ‡‰ä¸åŒæœå°‹æ¬„å…§å®¹
        const SEARCH_CONFIG = {
          trip: {
            destinationPlaceholder: "æƒ³å»å“ªè£¡ç©ï¼Ÿï¼ˆä¾‹ï¼šå°åŒ—ã€æ–°åŒ—ã€èŠ±è“®ï¼‰",
            dateLabel: "æ—…è¡Œæ—¥æœŸ",
            peopleLabel: "äººæ•¸"
          },
          hotel: {
            destinationPlaceholder: "æœå°‹åŸå¸‚ã€å€åŸŸæˆ–é£¯åº—åç¨±",
            dateLabel: "å…¥ä½ - é€€æˆ¿",
            peopleLabel: "æˆ¿å®¢"
          },
          ticket: {
            destinationPlaceholder: "æœå°‹æ™¯é»æˆ–åŸå¸‚åç¨±",
            dateLabel: "ä½¿ç”¨æ—¥æœŸ",
            peopleLabel: "å…¥å ´äººæ•¸"
          },
          car: {
            destinationPlaceholder: "å–è»Šåœ°é»ï¼ˆä¾‹ï¼šå°åŒ—è»Šç«™ã€é«˜é›„å·¦ç‡Ÿï¼‰",
            dateLabel: "å–è»Š - é‚„è»Šæ—¥æœŸ",
            peopleLabel: "ä¹˜å®¢äººæ•¸"
          }
        };

        /* ===== æœå°‹åˆ—äº’å‹•ï¼ˆä¿®æ­£å†’æ³¡èˆ‡é¢æ¿é—œé–‰ï¼‰ ===== */
        // Tab
        $('.search-tab').on('click', function () {
          $('.search-tab').removeClass('active');
          $(this).addClass('active');
          const type = $(this).data('type');
          $('#searchType').val(type);

          // âœ… å¥—ç”¨å°ç…§è¡¨æ›´æ–° UI
          $('#destinationInput').attr('placeholder', SEARCH_CONFIG[type].destinationPlaceholder);
          $('#peopleLabel').text(SEARCH_CONFIG[type].peopleLabel + "ï¼š " + $('#peopleCount').text());

          // âœ… åˆ‡æ›åˆ†é¡æ™‚é‡ç½®æ—…å®¢æ•¸
          cnt = 2;
          syncPeople();

          // âœ… åˆ‡æ›æ™‚æ¸…é™¤å‰é¢æ‰€é¸çš„å…§å®¹
          $('#destinationInput').val('');
          $('#dateLabel').val('');
          $('#startDate').val('');
          $('#endDate').val('');
          $('#peopleInput').val('2');
        });

        // å»ºè­°æ¸…å–®
        const TW_DESTS = [
          "å°åŒ—","æ–°åŒ—","æ¡ƒåœ’","æ–°ç«¹","å°ä¸­","å—æŠ•","å°å—","é«˜é›„","å®œè˜­","èŠ±è“®","å°æ±","æ¾æ¹–","é‡‘é–€","é¦¬ç¥–"
        ];

        function renderSuggest(list){
          const box = $('#destSuggest').empty();
          list.forEach(name=>{
            $('<div>', {class:'suggest-item badge text-dark', text:name})
              .appendTo(box)
              .on('mousedown', function(e){ // ç”¨ mousedown å…ˆæ–¼ document è§¸ç™¼
                e.stopPropagation();
                $('#destinationInput').val(name).trigger('change').blur();
                closeAllDropdowns();
              });
          });
        }
        renderSuggest(TW_DESTS);

        function openDest() {
              const input = document.getElementById('destinationInput');
              const panel = document.getElementById('destPanel');

              if (panel.parentElement !== document.body) {
                document.body.appendChild(panel);
              }

              const rect = input.getBoundingClientRect();
              const scrollTop = window.scrollY || document.documentElement.scrollTop;
              const scrollLeft = window.scrollX || document.documentElement.scrollLeft;

              const panelHeight = panel.scrollHeight || 260;
              const spaceBelow = window.innerHeight - rect.bottom;
              const spaceAbove = rect.top;

              panel.style.position = 'absolute';
              panel.style.left = rect.left + scrollLeft + 'px';
              panel.style.width = rect.width + 'px';
              panel.style.zIndex = '2147483647';

              // âœ… è‡ªå‹•åˆ¤æ–·ï¼šè‹¥ä¸‹æ–¹ç©ºé–“ä¸è¶³ï¼Œå¾€ä¸Šå±•é–‹
              if (spaceBelow < panelHeight + 20 && spaceAbove > panelHeight) {
                panel.style.top = (rect.top + scrollTop - panelHeight - 8) + 'px';
              } else {
                panel.style.top = (rect.bottom + scrollTop + 6) + 'px';
              }

              panel.style.display = 'block';
        }


        function closeAllDropdowns(){ $('.dropdown-panel').hide(); }

        // ç›®çš„åœ°å¤–å±¤ï¼šåªæœ‰é»ã€Œé input å€åŸŸã€æ‰åˆ‡æ›é¢æ¿
        $('#destSelect').on('mousedown', function(e){
          if ($(e.target).is('#destinationInput')) return;
          e.stopPropagation();
          renderSuggest(TW_DESTS); // âœ… æ°¸é é‡æ–°è¼‰å…¥å®Œæ•´æ¸…å–®
          $('#destPanel').toggle();
        });

        // ç›®çš„åœ°è¼¸å…¥æ¡†ï¼šfocus / input / click / mousedown å…¨éƒ¨é˜»æ­¢å†’æ³¡ï¼Œä¸¦é¡¯ç¤ºé¢æ¿
        $('#destinationInput')
          .on('focus input click mousedown', function(e){
            e.stopPropagation();

            // âœ… é—œé–‰æ—¥æœŸé¸æ“‡å™¨
            if ($('#dateLabel').data('daterangepicker'))
                $('#dateLabel').data('daterangepicker').hide();

            const q = $(this).val().trim();
            const filtered = q ? TW_DESTS.filter(x => x.toLowerCase().includes(q.toLowerCase())) : TW_DESTS;
            // renderSuggest(filtered.length ? filtered : TW_DESTS);
            openDest();
          });


        // é¢æ¿æœ¬é«”ï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œä¸è®“ document é—œæ‰
        $('#destPanel').on('mousedown click', function(e){ e.stopPropagation(); });

        // å…¨åŸŸé»æ“Š / æŒ‰ä¸‹é—œé–‰æ‰€æœ‰ä¸‹æ‹‰ï¼ˆmousedown èƒ½æ›´æ—©åƒåˆ°äº‹ä»¶ï¼Œé¿å…é–ƒç¾ï¼‰
        $(document).on('mousedown click', function(){ closeAllDropdowns(); });

        /* æ—…å®¢æ•¸ï¼ˆå…§åµŒæ§åˆ¶ï¼‰ */
        let cnt = Number($('#peopleInput').val() || 2);
        function syncPeople(){
          $('#peopleCount').text(cnt);
          $('#peopleLabel').text(cnt + ' ä½æ—…å®¢');
          $('#peopleInput').val(cnt);
        }
        $('#plus').on('click', function(e){ e.preventDefault(); e.stopPropagation(); cnt++; syncPeople(); });
        $('#minus').on('click', function(e){ e.preventDefault(); e.stopPropagation(); if(cnt>1){ cnt--; syncPeople(); }});
        syncPeople();

        /* æ—¥æœŸï¼šdaterangepickerï¼ˆåƒ…æ—¥æœŸï¼Œä¸å«æ™‚é–“ï¼‰ */
        $('#dateLabel').daterangepicker({
          parentEl: 'body',     // è®“é¢æ¿ç›´æ¥æ›åœ¨ body
          drops: 'down',        // æˆ– 'auto'ï¼Œé¿å…å‘ä¸Šé•·è¢«è£
          opens: 'center',      // ä¾ä½ çš„ç‰ˆé¢èª¿æ•´
          autoUpdateInput: false,
          minDate: moment().startOf('day'), // âœ… ç¦æ­¢é¸éå»
          locale: {
              format: 'YYYY/MM/DD',
              cancelLabel: 'æ¸…é™¤',
              applyLabel:'ç¢ºå®š',
              daysOfWeek: ['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­'],
              monthNames: ['ä¸€æœˆ','äºŒæœˆ','ä¸‰æœˆ','å››æœˆ','äº”æœˆ','å…­æœˆ','ä¸ƒæœˆ','å…«æœˆ','ä¹æœˆ','åæœˆ','åä¸€æœˆ','åäºŒæœˆ'],
              firstDay: 0,
          }
        }, function(start, end){
          $('#startDate').val(start.format('YYYY/MM/DD'));
          $('#endDate').val(end.format('YYYY/MM/DD'));
          $('#dateLabel').val(start.format('YYYY/MM/DD') + ' - ' + end.format('YYYY/MM/DD'));
        }).on('cancel.daterangepicker', function(){
          $(this).val('');
          $('#startDate,#endDate').val('');
        });

        // è¡¨å–®é€å‡ºï¼ˆè‹¥è¦é©—è­‰å¯åœ¨é€™è£¡åšï¼‰
        $('#topSearchForm').on('submit', function (e) {

            let destination = $('#destinationInput').val().trim();
            let start = $('#startDate').val().trim();
            let end = $('#endDate').val().trim();

            let isValid = true;

            // æ¸…é™¤ä¹‹å‰çš„éŒ¯èª¤æ¨£å¼
            $('#destinationInput').removeClass('is-invalid');
            $('#dateLabel').removeClass('is-invalid');

            // âœ… é©—è­‰ç›®çš„åœ°
            if (destination === "") {
                $('#destinationInput').addClass('is-invalid');
                isValid = false;
            }

            // âœ… é©—è­‰æ—¥æœŸ
            if (start === "" || end === "") {
                $('#dateLabel').addClass('is-invalid');
                isValid = false;
            }

            // âŒ è‹¥ä¸é€šé â†’ ç”¨ SweetAlert æç¤º
            if (!isValid) {
                e.preventDefault();
                Swal.fire({
                    icon: 'warning',
                    title: 'è³‡è¨Šå°šæœªå¡«å¯«å®Œæ•´',
                    text: 'è«‹é¸æ“‡ã€Œç›®çš„åœ°ã€åŠã€Œæ—…è¡Œæ—¥æœŸã€ã€‚',
                    confirmButtonColor: '#7ec8e3',
                    confirmButtonText: 'æˆ‘çŸ¥é“äº†'
                });
                return false;
            }

            // âœ… é€šé â†’ æ”¾è¡Œè¡¨å–®
            return true;
        });


    </script>
}